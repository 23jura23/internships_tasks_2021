# JetBrains Summer Internships 2021
## IntelliJ: Подключение по SSH через прокси-серверы

### Тестовое задание

В этом тестовом задании реалализовано клиент-серверное приложение. Клиент отсылает на сервер
число N, а сервер отвечает N-ым числом Фибоначчи. При этом сервер поддерживает несколько клиентов одновеременно
за счёт создания на каждого клиента отдельного потока.

Вычисления числа Фибонччи выполняется в том же потоке, что и обработка взаимодействия с клиентом. Числа Фибоначчи 
вычисляются с помощью возведения матрицы в степень, таким образом асимптотика `O(log(N) * w^2)`, где `w` - длина ответа

### Комментарий

Я сначала пропустил комментарий про выполнение задания в одном файле, поэтому сделал структурированный проект 
с несколькими файлами, который собирается в `jar`-файлы отдельно для сервера и для клиента. 
Уже после я обнаружил комментарий и на всякий случай объединил код в отдельный класс 
`GeneralClientServer`, который также собирается в собственный `jar`-файл

### Использование

Проект писался в IntelliJ IDEA, поэтому собирать его удобно через неё. 
Однако собрать `jar`-файлы можно и без неё.

В IntelliJ IDEA есть несколько конфигураций сборки gradle. `Server`, `Client` и `GeneralClientServer` запускают 
проект соответствующую компоненту прямо в IDE, можно запускать несколько целей одновременно. 

В консоли можно запустить `gradlew` с задачами `serverJar`, `clientJar` и `generalClientServerJar`, которые соберут `jar`-файлы
в папку `build/libs`. Эти же задачи можно запустить и из IntelliJ IDEA.

Пример использования `jar`-файлов:
```bash
java -jar build/libs/client-1.0.jar 127.0.0.1 13378
java -jar build/libs/server-1.0.jar 127.0.0.1 13378
java -jar build/libs/generalClientServer-1.0.jar 127.0.0.1 13378
```

В примере выше подключение идёт через `127.0.0.1` - `localhost`. Если же хочется настроить соединение не внутри одного компьютера, 
то стоит найти сервер с белым ip и указывать его ip в качестве ip-адреса как на сервере, так и у клиента. 
На сервере можно также указывать, например, `0.0.0.0`, чтобы слушать вообще все входящие соединения.

### Тестирование

Сначала я вручную протестировал работу приложения на своём локальном компьютере, через `127.0.0.1`. 
Затем я поднял серверную часть на своём сервере DigitalOcean и протестировал работу с ней, 
подсоединяясь к ней как из `localhost` сервера, так и с своего компьютера. Также я написал тесты на `Python3`, 
которые одновременно запускают большое количество клиентов (до 1000). Тесты случайным образом посылают запросы 
на случайные числа Фибоначчи и проверяют корректность ответа, а также замеряют время суммарное время запросов. Так, 
например, 1000 запросов от 10 клиентов на числа Фибоначчи с номерами до 100000 занимают в среднем 15с.